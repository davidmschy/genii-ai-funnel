<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Strategy Session Application | Genii AI</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; 
            line-height: 1.6; 
            color: #333; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .form-container { 
            max-width: 700px; 
            margin: 0 auto; 
            background: white; 
            padding: 50px;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 { 
            color: #2d3748; 
            margin-bottom: 10px; 
            font-size: 2.2rem;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }
        
        .form-step {
            display: none;
        }
        
        .form-step.active {
            display: block;
            animation: fadeIn 0.4s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2d3748;
        }
        
        .required {
            color: #e53e3e;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
            font-family: inherit;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        button {
            flex: 1;
            padding: 16px 32px;
            font-size: 1.1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #e2e8f0;
            color: #2d3748;
        }
        
        .btn-secondary:hover {
            background: #cbd5e0;
        }
        
        .progress-bar {
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #667eea;
            transition: width 0.4s ease;
        }
        
        .step-indicator {
            text-align: center;
            color: #718096;
            margin-bottom: 20px;
            font-size: 0.95rem;
        }
        
        .error-message {
            color: #e53e3e;
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }
        
        .success-message {
            background: #48bb78;
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            display: none;
        }
        
        .success-message h2 {
            color: white;
            margin-bottom: 10px;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 4px solid #e2e8f0;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .help-text {
            font-size: 0.9rem;
            color: #718096;
            margin-top: 5px;
        }
        
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .radio-option:hover {
            border-color: #667eea;
            background: #f7fafc;
        }
        
        .radio-option input[type="radio"] {
            width: auto;
            margin-right: 12px;
        }
        
        .radio-option.selected {
            border-color: #667eea;
            background: #edf2f7;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>Apply for Your Free AI Strategy Session</h1>
        <p class="subtitle">Help us understand your needs so we can provide the most valuable consultation.</p>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 33%"></div>
        </div>
        
        <div class="step-indicator">
            <span id="stepIndicator">Step 1 of 3</span>
        </div>
        
        <form id="leadForm">
            <!-- Step 1: Contact Information -->
            <div class="form-step active" data-step="1">
                <h2 style="margin-bottom: 25px; color: #2d3748;">Contact Information</h2>
                
                <div class="form-group">
                    <label>Full Name <span class="required">*</span></label>
                    <input type="text" id="lead_name" name="lead_name" required>
                    <span class="error-message" id="error_lead_name">Please enter your full name</span>
                </div>
                
                <div class="form-group">
                    <label>Email Address <span class="required">*</span></label>
                    <input type="email" id="email_id" name="email_id" required>
                    <span class="error-message" id="error_email_id">Please enter a valid email address</span>
                </div>
                
                <div class="form-group">
                    <label>Phone Number <span class="required">*</span></label>
                    <input type="tel" id="phone" name="phone" required>
                    <span class="error-message" id="error_phone">Please enter your phone number</span>
                </div>
                
                <div class="form-group">
                    <label>Company Name <span class="required">*</span></label>
                    <input type="text" id="company_name" name="company_name" required>
                    <span class="error-message" id="error_company_name">Please enter your company name</span>
                </div>
                
                <div class="button-group">
                    <button type="button" class="btn-primary" onclick="nextStep()">Next Step →</button>
                </div>
            </div>
            
            <!-- Step 2: Business Details -->
            <div class="form-step" data-step="2">
                <h2 style="margin-bottom: 25px; color: #2d3748;">Business Details</h2>
                
                <div class="form-group">
                    <label>Industry <span class="required">*</span></label>
                    <select id="industry" name="industry" required>
                        <option value="">Select your industry...</option>
                        <option value="Technology">Technology</option>
                        <option value="Healthcare">Healthcare</option>
                        <option value="Finance">Finance</option>
                        <option value="Retail">Retail/E-commerce</option>
                        <option value="Manufacturing">Manufacturing</option>
                        <option value="Professional Services">Professional Services</option>
                        <option value="Real Estate">Real Estate</option>
                        <option value="Education">Education</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Company Size <span class="required">*</span></label>
                    <select id="company_size" name="company_size" required>
                        <option value="">Select company size...</option>
                        <option value="1-10">1-10 employees</option>
                        <option value="11-50">11-50 employees</option>
                        <option value="51-200">51-200 employees</option>
                        <option value="201-500">201-500 employees</option>
                        <option value="500+">500+ employees</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>What's your biggest business challenge right now? <span class="required">*</span></label>
                    <textarea id="notes" name="notes" required placeholder="E.g., 'Our customer service team is overwhelmed with repetitive questions' or 'Manual data entry is consuming too much time'"></textarea>
                    <span class="help-text">Be specific - this helps us prepare for your consultation</span>
                </div>
                
                <div class="button-group">
                    <button type="button" class="btn-secondary" onclick="prevStep()">← Back</button>
                    <button type="button" class="btn-primary" onclick="nextStep()">Next Step →</button>
                </div>
            </div>
            
            <!-- Step 3: Project Details -->
            <div class="form-step" data-step="3">
                <h2 style="margin-bottom: 25px; color: #2d3748;">Project Details</h2>
                
                <div class="form-group">
                    <label>Project Budget Range <span class="required">*</span></label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="budget_range" value="Under $5,000" required>
                            <span>Under $5,000 - Small automation project</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="budget_range" value="$5,000 - $15,000">
                            <span>$5,000 - $15,000 - Single AI agent deployment</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="budget_range" value="$15,000 - $50,000">
                            <span>$15,000 - $50,000 - Multiple agents or complex workflow</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="budget_range" value="$50,000+">
                            <span>$50,000+ - Enterprise-scale deployment</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Desired Timeline <span class="required">*</span></label>
                    <select id="timeline" name="timeline" required>
                        <option value="">Select timeline...</option>
                        <option value="Urgent (1-2 weeks)">Urgent (1-2 weeks)</option>
                        <option value="Soon (1 month)">Soon (1 month)</option>
                        <option value="Planning (2-3 months)">Planning (2-3 months)</option>
                        <option value="Exploring (3+ months)">Exploring (3+ months)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>How did you hear about us?</label>
                    <select id="source" name="source">
                        <option value="">Select one...</option>
                        <option value="Google Search">Google Search</option>
                        <option value="LinkedIn">LinkedIn</option>
                        <option value="Referral">Referral</option>
                        <option value="Social Media">Social Media</option>
                        <option value="Event/Conference">Event/Conference</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="button-group">
                    <button type="button" class="btn-secondary" onclick="prevStep()">← Back</button>
                    <button type="submit" class="btn-primary">Submit Application →</button>
                </div>
            </div>
        </form>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="margin-top: 15px; color: #718096;">Submitting your application...</p>
        </div>
        
        <div class="success-message" id="successMessage">
            <h2>✓ Application Submitted Successfully!</h2>
            <p style="margin-top: 10px;">Thank you for your interest! We'll review your application and reach out within 24 hours to schedule your free AI strategy session.</p>
            <p style="margin-top: 15px; font-size: 0.95rem;">Check your email for confirmation and next steps.</p>
        </div>
    </div>
    
    <script>
        let currentStep = 1;
        const totalSteps = 3;
        
        // Radio button selection styling
        document.querySelectorAll('.radio-option input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.querySelectorAll('.radio-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                this.parentElement.classList.add('selected');
            });
        });
        
        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('stepIndicator').textContent = `Step ${currentStep} of ${totalSteps}`;
        }
        
        function validateStep(step) {
            const stepElement = document.querySelector(`.form-step[data-step="${step}"]`);
            const inputs = stepElement.querySelectorAll('input[required], select[required], textarea[required]');
            let isValid = true;
            
            inputs.forEach(input => {
                const errorElement = document.getElementById('error_' + input.id);
                
                if (!input.value.trim()) {
                    if (errorElement) {
                        errorElement.style.display = 'block';
                    }
                    input.style.borderColor = '#e53e3e';
                    isValid = false;
                } else if (input.type === 'email' && !input.value.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)) {
                    if (errorElement) {
                        errorElement.style.display = 'block';
                    }
                    input.style.borderColor = '#e53e3e';
                    isValid = false;
                } else if (input.type === 'radio') {
                    const radioGroup = document.querySelectorAll(`input[name="${input.name}"]`);
                    const checked = Array.from(radioGroup).some(r => r.checked);
                    if (!checked) {
                        isValid = false;
                    }
                } else {
                    if (errorElement) {
                        errorElement.style.display = 'none';
                    }
                    input.style.borderColor = '#e2e8f0';
                }
            });
            
            return isValid;
        }
        
        function nextStep() {
            if (!validateStep(currentStep)) {
                return;
            }
            
            if (currentStep < totalSteps) {
                document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.remove('active');
                currentStep++;
                document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.add('active');
                updateProgress();
                window.scrollTo(0, 0);
            }
        }
        
        function prevStep() {
            if (currentStep > 1) {
                document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.remove('active');
                currentStep--;
                document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.add('active');
                updateProgress();
                window.scrollTo(0, 0);
            }
        }
        
        document.getElementById('leadForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!validateStep(currentStep)) {
                return;
            }
            
            // Show loading, hide form
            document.getElementById('leadForm').style.display = 'none';
            document.querySelector('.progress-bar').style.display = 'none';
            document.querySelector('.step-indicator').style.display = 'none';
            document.getElementById('loading').style.display = 'block';
            
            // Collect form data
            const formData = {
                lead_name: document.getElementById('lead_name').value,
                email_id: document.getElementById('email_id').value,
                phone: document.getElementById('phone').value,
                company_name: document.getElementById('company_name').value,
                industry: document.getElementById('industry').value,
                status: 'Lead', // ERPNext Lead status
                source: document.getElementById('source').value || 'Website',
                notes: `${document.getElementById('notes').value}\n\nCompany Size: ${document.getElementById('company_size').value}\nBudget Range: ${document.querySelector('input[name="budget_range"]:checked').value}\nTimeline: ${document.getElementById('timeline').value}`
            };
            
            try {
                // Submit to ERPNext API
                const ERPNEXT_URL = 'https://geniinow.v.frappe.cloud';
                const API_KEY = 'f9fcb34a7edc1ab';
                const API_SECRET = '4e77b2d0fab2e42';

                const response = await fetch(`${ERPNEXT_URL}/api/resource/Lead`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'token ' + API_KEY + ':' + API_SECRET
                    },
                    body: JSON.stringify(formData)
                });
                
                if (response.ok) {
                    // Show success message
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('successMessage').style.display = 'block';
                    
                    // Optional: Send to Google Analytics or other tracking
                    if (typeof gtag !== 'undefined') {
                        gtag('event', 'form_submission', {
                            'event_category': 'Lead Generation',
                            'event_label': 'AI Development Consultation'
                        });
                    }
                } else {
                    throw new Error('Submission failed');
                }
            } catch (error) {
                alert('There was an error submitting your application. Please try again or email us directly at david@geniinow.com');
                document.getElementById('loading').style.display = 'none';
                document.getElementById('leadForm').style.display = 'block';
                document.querySelector('.progress-bar').style.display = 'block';
                document.querySelector('.step-indicator').style.display = 'block';
            }
        });
        
        // Clear error messages on input
        document.querySelectorAll('input, select, textarea').forEach(input => {
            input.addEventListener('input', function() {
                const errorElement = document.getElementById('error_' + this.id);
                if (errorElement) {
                    errorElement.style.display = 'none';
                }
                this.style.borderColor = '#e2e8f0';
            });
        });
    </script>
</body>
</html>
